(this.webpackJsonptula=this.webpackJsonptula||[]).push([[0],{87:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a(0),i=a.n(c),r=a(12),s=a.n(r),l=a(8),o=a(131),j=a(140),d=a(16),u=a(3),b=a(5),h=a(143),O=a(128),x=a(129),p=a(130),m=a(89),g=a(65),f=a.n(g),v=a(88),y=Object(b.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,a=e.classes,c=e.onClose,i=Object(u.a)(e,["children","classes","onClose"]);return Object(n.jsxs)(O.a,Object(d.a)(Object(d.a)({disableTypography:!0,className:a.root},i),{},{children:[Object(n.jsx)(v.a,{variant:"h6",children:t}),c?Object(n.jsx)(m.a,{"aria-label":"close",className:a.closeButton,onClick:c,children:Object(n.jsx)(f.a,{})}):null]}))})),C=Object(b.a)((function(e){return{root:{padding:e.spacing(2),minWidth:320}}}))(x.a),S=Object(b.a)((function(e){return{root:{margin:0,padding:e.spacing(1)}}}))(p.a);function D(e){var t=e.children,a=e.open,c=e.title,i=e.actions,r=e.handleClose;return Object(n.jsx)("form",{noValidate:!0,autoComplete:"off",children:Object(n.jsxs)(h.a,{"aria-labelledby":"customized-dialog-title",open:a,onClose:null!==r&&void 0!==r?r:function(){return null},children:[c&&Object(n.jsx)(y,{id:"customized-dialog-title",onClose:r,children:c}),Object(n.jsx)(C,{children:t}),Object(n.jsx)(S,{children:i})]})})}function N(e){var t=e.loggedIn,a=void 0!==t&&t,c=e.handleSubmit,r=i.a.useState(""),s=Object(l.a)(r,2),d=s[0],u=s[1],b=Object(n.jsx)(o.a,{type:"submit",onClick:function(e){e.preventDefault(),c({type:"LOGIN",userId:d})},color:"primary",children:"Login"});return Object(n.jsx)(D,{title:"Login",actions:b,open:!a,children:Object(n.jsx)(j.a,{id:"userId",label:"User Id",value:d,fullWidth:!0,autoFocus:!0,onChange:function(e){u(e.target.value)}})})}var w=a(132),I=a(142),A=a(135),k=a(134),z=a(49),R=a.n(z),T=a(136),B=a(133),E=a(47),W=a.n(E),L=a(13),F=a(17),G=(a(51),a(50),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7;return Math.random().toString(36).slice(-e)}),H=(a(24),function e(t,a,n){Object(F.a)(this,e),this.id=G(),this.name=t,this.description=a,this.opening_balance=n,this.balance=n}),M=Object(w.a)((function(e){return{grid:{textAlign:"right"}}}));function V(e){var t=e.handleAdd,a=M(),c=i.a.useState(""),r=Object(l.a)(c,2),s=r[0],d=r[1],u=i.a.useState(0),b=Object(l.a)(u,2),h=b[0],O=b[1],x=i.a.useState(""),p=Object(l.a)(x,2),m=p[0],g=p[1],f=i.a.useState(!1),v=Object(l.a)(f,2),y=v[0],C=v[1],S=function(){C(!y)};return Object(n.jsxs)("div",{children:[Object(n.jsx)(D,{open:y,actions:Object(n.jsx)(o.a,{onClick:function(e){e.preventDefault(),t(new H(s,m,h))},color:"primary",children:"Submit"}),title:"New Entity",handleClose:S,children:Object(n.jsxs)(B.a,{container:!0,spacing:1,children:[Object(n.jsx)(B.a,{item:!0,sm:6,children:Object(n.jsx)(j.a,{id:"name",label:"Name",value:s,onChange:function(e){d(e.target.value)},fullWidth:!0})}),Object(n.jsx)(B.a,{item:!0,sm:6,children:Object(n.jsx)(j.a,{id:"balance",label:"Opening Balance",value:h,onChange:function(e){O(e.target.value)},type:"number",fullWidth:!0})}),Object(n.jsx)(B.a,{item:!0,sm:12,children:Object(n.jsx)(j.a,{id:"description",label:"Description",value:m,onChange:function(e){g(e.target.value)},type:"text",multiline:!0,rows:2,fullWidth:!0})})]})}),Object(n.jsx)(B.a,{container:!0,spacing:1,children:Object(n.jsx)(B.a,{item:!0,sm:12,className:a.grid,children:Object(n.jsx)(o.a,{variant:"contained",onClick:S,color:"primary",startIcon:Object(n.jsx)(W.a,{}),children:"Entity"})})})]})}var J=function e(t,a,n,c){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Date.now();Object(F.a)(this,e),this.id=G(),this.time=+new Date(i),this.entityId=t,this.credit=a,this.debit=n,this.remarks=null!==c&&void 0!==c?c:""},P=a(90),U=Object(w.a)((function(e){return{paper:{margin:"".concat(e.spacing(1),"px 0"),padding:"".concat(e.spacing(1),"px")},grid:{textAlign:"right"},button:{margin:"".concat(e.spacing(1),"px 0")}}}));function _(e){var t=e.handleAdd,a=U(),c=i.a.useState(Date.now()),r=Object(l.a)(c,2),s=r[0],d=r[1],u=i.a.useState(0),b=Object(l.a)(u,2),h=b[0],O=b[1],x=i.a.useState(0),p=Object(l.a)(x,2),m=p[0],g=p[1],f=i.a.useState(""),v=Object(l.a)(f,2),y=v[0],C=v[1],S=i.a.useState(!1),D=Object(l.a)(S,2),N=D[0],w=D[1],I=function(){w(!N)};return Object(n.jsxs)("form",{noValidate:!0,autoComplete:"off",children:[N&&Object(n.jsx)(P.a,{className:a.paper,children:Object(n.jsxs)(B.a,{container:!0,spacing:1,children:[Object(n.jsx)(B.a,{item:!0,sm:4,xs:12,children:Object(n.jsx)(j.a,{id:"debit",label:"Time",value:s,onChange:function(e){return d(e.target.value)},type:"datetime-local",fullWidth:!0,size:"small"})}),Object(n.jsx)(B.a,{item:!0,sm:4,xs:12,children:Object(n.jsx)(j.a,{id:"credit",label:"Credit (+)",value:h,onChange:function(e){return O(Number(e.target.value))},type:"number",fullWidth:!0,size:"small"})}),Object(n.jsx)(B.a,{item:!0,sm:4,xs:12,children:Object(n.jsx)(j.a,{id:"debit",label:"Debit (-)",value:m,onChange:function(e){return g(Number(e.target.value))},type:"number",fullWidth:!0,size:"small"})}),Object(n.jsx)(B.a,{item:!0,xs:12,children:Object(n.jsx)(j.a,{id:"remarks",label:"Remarks",value:y,onChange:function(e){return C(e.target.value)},type:"text",multiline:!0,rows:2,fullWidth:!0,size:"small"})}),Object(n.jsx)(B.a,{item:!0,xs:12,className:a.grid,children:Object(n.jsx)(o.a,{variant:"contained",onClick:function(e){e.preventDefault(),t((function(e){return new J(e,h,m,y,s)})),I()},color:"primary",size:"small",children:"Submit"})})]})}),!N&&Object(n.jsx)(o.a,{onClick:I,color:"primary",startIcon:Object(n.jsx)(W.a,{}),size:"small",className:a.button,children:"Transaction"})]})}var q=a(10),K=a(66),Q=a.n(K),X=Object(w.a)((function(e){return{root:{fontSize:e.typography.pxToRem(15)},debit:{color:e.palette.error.main},credit:{color:e.palette.success.main}}}));function Y(e){var t,a=e.amount,c=X();return Object(n.jsxs)(v.a,{className:Q()(c.root,(t={},Object(q.a)(t,c.debit,a<0),Object(q.a)(t,c.credit,a>0),t)),component:"span",children:["\u20b9 ",Math.abs(a)]})}var Z=Object(w.a)((function(e){return{root:{width:"100%"},heading:{flexBasis:"33.33%",flexShrink:0,textAlign:"right"},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary}}}));function $(e){var t=e.id,a=e.time,c=e.credit,r=e.debit,s=e.remarks,o=Z(),j=i.a.useState(!1),d=Object(l.a)(j,2),u=d[0],b=d[1];return Object(n.jsxs)(I.a,{expanded:u,onChange:function(e,t){b(t)},children:[Object(n.jsxs)(k.a,{expandIcon:Object(n.jsx)(R.a,{}),"aria-controls":"content",id:t,children:[Object(n.jsx)(v.a,{children:new Date(a).toLocaleString()}),Object(n.jsx)("div",{className:o.heading,children:Object(n.jsx)(Y,{amount:c})}),Object(n.jsx)("div",{className:o.heading,children:Object(n.jsx)(Y,{amount:-r})})]}),Object(n.jsx)(A.a,{children:Object(n.jsx)(v.a,{className:o.secondaryHeading,children:s})})]})}function ee(e){var t=e.entityId,a=e.data,c=e.dispatch;Z();return Object(n.jsxs)(B.a,{container:!0,children:[Object(n.jsx)(B.a,{item:!0,sm:12,children:a.map((function(e){return Object(n.jsx)($,Object(d.a)({},e),e.id)}))}),Object(n.jsx)(B.a,{item:!0,sm:12,children:Object(n.jsx)(_,{handleAdd:function(e){var a=e(t);c({type:"ADD",transaction:a})}})})]})}var te=Object(w.a)((function(e){return{root:{width:"100%",margin:"".concat(e.spacing(1),"px 0")},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0},secondaryHeading:{fontSize:e.typography.pxToRem(15),flexBasis:"66.66%",flexShrink:0,textAlign:"right",marginRight:e.spacing(2)},paper:{padding:e.spacing(1)},divider:{margin:"".concat(e.spacing(1),"px 0")},rightAlign:{textAlign:"right"}}}));function ae(e){var t=e.id,a=e.name,c=e.description,r=e.balance,s=e.opening_balance,o=e.transactions,j=e.transactionDispatcher,d=te(),u=i.a.useState(!1),b=Object(l.a)(u,2),h=b[0],O=b[1];return Object(n.jsxs)(I.a,{expanded:h,onChange:function(e,t){O(t)},children:[Object(n.jsxs)(k.a,{expandIcon:Object(n.jsx)(R.a,{}),"aria-controls":"content",id:t,children:[Object(n.jsx)(v.a,{className:d.heading,children:a}),Object(n.jsx)("div",{className:d.secondaryHeading,children:Object(n.jsx)(Y,{amount:r})})]}),Object(n.jsx)(T.a,{}),Object(n.jsx)(A.a,{children:Object(n.jsxs)(B.a,{container:!0,spacing:2,children:[Object(n.jsxs)(B.a,{item:!0,sm:3,children:[Object(n.jsx)(v.a,{variant:"caption",children:"Opening balance"}),Object(n.jsx)(v.a,{variant:"body2",children:Object(n.jsx)(Y,{amount:s})}),Object(n.jsx)(T.a,{className:d.divider}),Object(n.jsx)(v.a,{variant:"caption",children:"Description"}),Object(n.jsx)(v.a,{variant:"body2",children:c})]}),Object(n.jsx)(B.a,{item:!0,xs:12,sm:9,children:Object(n.jsx)(ee,{entityId:t,data:o,dispatch:j})})]})})]})}function ne(e){var t=e.data,a=e.entityDispatcher,c=e.transactionDispatcher,i=te();return Object(n.jsxs)(B.a,{container:!0,className:i.root,children:[Object(n.jsx)(B.a,{item:!0,sm:9,className:i.rightAlign,children:Object(n.jsx)(Y,{amount:t.balance})}),Object(n.jsx)(B.a,{item:!0,sm:3,children:Object(n.jsx)(V,{handleAdd:function(e){a({type:"ADD",entity:e})}})}),Object(n.jsx)(B.a,{item:!0,sm:12,children:t.entities.map((function(e){return Object(n.jsx)(ae,Object(d.a)(Object(d.a)({},e),{},{transactionDispatcher:c}),e.id)}))})]})}var ce=a(137),ie=a(138),re=a(67),se=a.n(re),le=a(139),oe=Object(w.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function je(e){var t=e.userId,a=e.children,c=oe();return Object(n.jsxs)("div",{className:c.root,children:[Object(n.jsx)(ce.a,{position:"static",children:Object(n.jsxs)(ie.a,{children:[Object(n.jsx)(v.a,{variant:"h6",className:c.title,children:"Tula"}),Object(n.jsx)("div",{children:t?Object(n.jsx)(v.a,{variant:"h6",className:c.title,children:t}):Object(n.jsx)(m.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",color:"inherit",children:Object(n.jsx)(se.a,{})})})]})}),Object(n.jsx)(le.a,{children:t&&a})]})}function de(e,t){var a=t.type,n=t.userId;switch(a){case"LOGIN":return{userId:n};case"LOGOUT":return{};default:throw new Error}}function ue(e,t){switch(t.type){case"ADD":return[].concat(Object(L.a)(e),[t.entity]);case"REMOVE":return Object(L.a)(e);default:throw new Error}}function be(e,t){var a=t.type,n=t.transaction;switch(a){case"ADD":return[].concat(Object(L.a)(e),[n]);default:throw new Error}}var he=function(){var e=i.a.useReducer(de,{}),t=Object(l.a)(e,2),a=t[0].userId,r=t[1],s=i.a.useReducer(ue,[]),o=Object(l.a)(s,2),j=o[0],u=o[1],b=i.a.useReducer(be,[]),h=Object(l.a)(b,2),O=h[0],x=h[1],p=i.a.useState({}),m=Object(l.a)(p,2),g=m[0],f=m[1];return Object(c.useEffect)((function(){f(function(e,t){var a={balance:0,entities:[]};return Array.isArray(e)&&Array.isArray(t)&&(a.entities=e.map((function(e){return a.balance+=e.balance,Object(d.a)(Object(d.a)({},e),{},{transactions:t.filter((function(t){return t.entityId===e.id}))})}))),a}(j,O))}),[a,j,O]),Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(N,{loggedIn:!!a,handleSubmit:r}),Object(n.jsx)(je,{userId:a,children:Object(n.jsx)(ne,{data:g,entityDispatcher:u,transactionDispatcher:x})})]})},Oe=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,145)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),i(e),r(e)}))};s.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(he,{})}),document.getElementById("root")),Oe()}},[[87,1,2]]]);
//# sourceMappingURL=main.0bc2b7f6.chunk.js.map